var ref=require("events"),EventEmitter=ref.EventEmitter,events=new EventEmitter,methods=["delete","get","param","post","put","render"],registerEvent=function(e,t,n,r){events.on(t+"!"+n,r),e[t](n,function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];events.emit.apply(events,[t+"!"+n].concat(e))})};module.exports=function(e){return e.$on=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(1===t.length&&"object"==typeof t[0]){var r=t[0];Object.keys(r).forEach(function(t){-1!==methods.indexOf(t)&&Object.keys(r[t]).forEach(function(n){registerEvent(e,t,n,r[t][n])})})}else if(2===t.length){var o=t[0],i=t[1];if("string"==typeof o&&"function"==typeof i){var f=o.split("!"),s=f[0],v=f[1];registerEvent(e,s,v,i)}}},e};